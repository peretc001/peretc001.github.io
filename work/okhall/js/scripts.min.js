$(function() {

	//Sticky header menu
		$(document).scroll(function () {
			if ($(document).scrollTop() > 100) {
				$('.header__nav').addClass('sticky animated fadeIn faster');
				$('.header').addClass('gutter');
				$('#svg').addClass('black');
			} else {
				$('#svg').removeClass('black');
				$('.header__nav').removeClass('sticky animated fadeIn faster');
				$('.header').removeClass('gutter');
			}
		});

		$("#my-menu").mmenu({ 
			"extensions": ["theme-black", "pagedim-black", "position-left"], 
			"navbar": { "title": '<img src="/wp-content/uploads/2019/02/logo_footer.svg" alt="OKHall">' }
		}); 
		
		var openMenu = $("#my-menu").data("mmenu"); 
		openMenu.bind("open:finish", function () { 
			$(".hamburger").addClass("is-active");
			
		}), openMenu.bind("close:finish", function () { 
			$(".hamburger").removeClass("is-active") 
		});
		$('.mm-menu').bind('touchmove', function (e) { 
			e.preventDefault() 
		});

		$('#step1').submit(function(e){
			e.preventDefault();
			var m_method=$(this).attr('method');
			var m_action=$(this).attr('action');
			var m_data=$(this).serialize();
			$.ajax({
				type: m_method,
				url: m_action,
				data: m_data,
				success: function(result){
					$('#step1').hide();
					$('.price__form').append(result).addClass('animated fadeInDown');
					setTimeout(function() { 
						$('.price__form').removeClass('fadeInDown');
					}, 6000);
					
				}
			});
		});

		$(".partners__carousel").on("initialized.owl.carousel", function () {
			setTimeout(function () {
				partnersServices()
			}, 100);
		});
		$(".partners__carousel").owlCarousel({
			loop: true,
			nav: true,
			smartSpeed: 700,
			navText: ['<i class="fa fa-angle-left"></i>', '<i class="fa fa-angle-right"></i>'],
			dots: false,
			responsive: {
				0: {
					items: 1
				},
				576: {
					items: 2
				},
				768: {
					items: 3
				},
				992: {
					items: 4
				}
			}
		});

		function onResize() {
			if ($(window).width() > '300') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '200px'); 
				$('.flickity-viewport').css('height', '200px'); 
			}
			if ($(window).width() > '450') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '300px'); 
				$('.flickity-viewport').css('height', '300px'); 
			}
			if ($(window).width() > '576') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '330px'); 
				$('.flickity-viewport').css('height', '350px'); 
			}
			if ($(window).width() > '768') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '420px'); 
				$('.flickity-viewport').css('height', '450px'); 

				var position = myMap.getGlobalPixelCenter();myMap.setGlobalPixelCenter([ position[0] - 100, position[1] ]);
			}
			if ($(window).width() > '992') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '500px'); 
				$('.flickity-viewport').css('height', '500px'); 
			}
			if ($(window).width() > '1200') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '600px'); 
				$('.flickity-viewport').css('height', '600px'); 
			}
		}
		onResize();

		// function partnersServices() {
		// 	$(".partners__carousel").each(function () {
		// 		var ths = $(this),
		// 			thsh = ths.find(".partners__carousel .owl-item img").outerHeight();
		// 		ths.find(".partners__carousel .owl-item").css("min-height", thsh);

		// 	});
		// }
		// partnersServices();
		//Resize windows
		// function onResize() {
		// 	$('.partners__carousel__content').equalHeights();
		// }
		// onResize();
		


 		//to TOP
		$(window).scroll(function() {
		 	if($(this).scrollTop() != 0) {
				$('#toTop').fadeIn();
			} else {
				$('#toTop').fadeOut();
			}
		});
		$('#toTop').click(function() {
			$('body,html').animate({scrollTop:0},800);
		});
 		
 		$('.go_to').click( function(){ 
			var scroll_el = $(this).attr('href');
	        if ($(scroll_el).length != 0) {
		    	$('html, body').animate({ scrollTop: $(scroll_el).offset().top }, 800); 
	        }
		    return false; 
	    });


 		
		function onResize() {
			if ($(window).width() > '300') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '200px'); 
				$('.flickity-viewport').css('height', '200px'); 
			}
			if ($(window).width() > '450') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '300px'); 
				$('.flickity-viewport').css('height', '300px'); 
			}
			if ($(window).width() > '576') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '330px'); 
				$('.flickity-viewport').css('height', '350px'); 
			}
			if ($(window).width() > '768') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '420px'); 
				$('.flickity-viewport').css('height', '450px'); 
			}
			if ($(window).width() > '992') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '500px'); 
				$('.flickity-viewport').css('height', '500px'); 
			}
			if ($(window).width() > '1200') { 
				$('.has-carousel.has-carousel-xlrg.flickity-enabled.is-draggable').css('height', '600px'); 
				$('.flickity-viewport').css('height', '600px'); 
			}
		}
		onResize();

		window.onresize = function () {
			onResize();
		};



});
