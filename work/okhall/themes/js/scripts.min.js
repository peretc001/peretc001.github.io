jQuery(document).ready(function($) {

	function stickyHeader() {
			var st = $(window).scrollTop();
			if (st > 0) {
				$(".nav_menu").addClass("is-sticky");
			} else {
				$(".nav_menu").removeClass("is-sticky");
			}
		}
		stickyHeader();
		$(window).scroll(function () {
			stickyHeader();
	});

	$("#my-menu").mmenu({ 
		"extensions": ["theme-black", "pagedim-black", "position-left"], 
		"navbar": { "title": '<img src="/wp-content/uploads/2019/02/logo_footer.svg" alt="OKHall">' }
	}); 
	
	var openMenu = $("#my-menu").data("mmenu"); 
	openMenu.bind("open:finish", function () { 
		$(".hamburger").addClass("is-active");
		
	}), openMenu.bind("close:finish", function () { 
		$(".hamburger").removeClass("is-active") 
	});
	$('.mm-menu').bind('touchmove', function (e) { 
		e.preventDefault() 
	});

	$(".wp-block-gallery").owlCarousel({
		loop: true,
		nav: true,
		smartSpeed: 700,
		navText: ['<i class="fa fa-angle-left"></i>', '<i class="fa fa-angle-right"></i>'],
		dots: true,
		dotsEach: true,
		items: 1,
		lazyLoad: true
	});
	$(".partners__carousel").owlCarousel({
		loop: true,
		nav: true,
		smartSpeed: 700,
		navText: ['<i class="fa fa-angle-left"></i>', '<i class="fa fa-angle-right"></i>'],
		dots: false,
		responsive: { 0: { items: 1 }, 650: { items: 2 }, 992: { items: 3 }, 1200: { items: 4 } }
	});


	//Video modal
	var $videoSrc;  
	$('.video-btn').click(function() {
	    $videoSrc = $(this).data( "src" );
	});  

	// when the modal is opened autoplay it  
	$('#videoModal').on('shown.bs.modal', function (e) {
	    
	// set the video src to autoplay and not to show related video. Youtube related video is like a box of chocolates... you never know what you're gonna get
	$("#video").attr('src',$videoSrc + "?rel=0&amp;showinfo=0&amp;modestbranding=1&amp;autoplay=1" ); 
	});
	  
	  
	// stop playing the youtube video when I close the modal
	$('#videoModal').on('hide.bs.modal', function (e) {
	    // a poor man's stop video
	    $("#video").attr('src',$videoSrc); 
	});


	//Modal
	$('#step1').submit(function(e){
			e.preventDefault();
			var m_method=$(this).attr('method');
			var m_action=$(this).attr('action');
			var m_data=$(this).serialize();
			$.ajax({
				type: m_method,
				url: m_action,
				data: m_data,
				success: function(result){
					$('#step1').hide();
					$('.price__form').append(result).addClass('animated fadeInDown');
					setTimeout(function() { 
						$('.price__form').removeClass('fadeInDown');
					}, 6000);
					
				}
			});
		});

		$('#catalog_form').submit(function(e){
			e.preventDefault();
			var m_method=$(this).attr('method');
			var m_action=$(this).attr('action');
			var m_data=$(this).serialize();
			$.ajax({
				type: m_method,
				url: m_action,
				data: m_data,
				success: function(result){
					$('#catalog_form').hide();
					$('.catalog__form').append(result).addClass('animated fadeIn');
					setTimeout(function() { 
						$('#catalogModalCenter').modal('hide');
					}, 2000);
				}
			});
		});

		$('.okhall-form').submit(function(e){
			e.preventDefault();
			var m_method=$(this).attr('method');
			var m_action=$(this).attr('action');
			var m_data=$(this).serialize();
			$.ajax({
				type: m_method,
				url: m_action,
				data: m_data,
				success: function(result){
					$('.okhall-form').hide();
					$('.okhall-modal').append(result).addClass('animated fadeIn');
					setTimeout(function() { 
						$('#bannerModalCenter').modal('hide');
						$('#operatorModalCenter').modal('hide');
					}, 2000);
				}
			});
		});

 		
		//to TOP
		$(window).scroll(function() {
		 	if($(this).scrollTop() != 0) {
				$('#toTop').fadeIn();
			} else {
				$('#toTop').fadeOut();
			}
		});
		$('#toTop').click(function() {
			$('body,html').animate({scrollTop:0},800);
		});
 		
 		$('.go_to').click( function(){ 
			var scroll_el = $(this).attr('href');
	        if ($(scroll_el).length != 0) {
		    	$('html, body').animate({ scrollTop: $(scroll_el).offset().top }, 800); 
	        }
		    return false; 
	    });


});
